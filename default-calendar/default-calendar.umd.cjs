(function(e,C){typeof exports=="object"&&typeof module<"u"?module.exports=C(require("vue")):typeof define=="function"&&define.amd?define(["vue"],C):(e=typeof globalThis<"u"?globalThis:e||self,e["default-calendar"]=C(e.Vue))})(this,function(e){"use strict";var C;const M=typeof window<"u",ve=t=>typeof t=="string",Y=()=>{};M&&((C=window==null?void 0:window.navigator)==null?void 0:C.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function _e(t){return typeof t=="function"?t():e.unref(t)}function De(t){return t}function Ve(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function b(t){var n;const a=_e(t);return(n=a==null?void 0:a.$el)!=null?n:a}const K=M?window:void 0;M&&window.document,M&&window.navigator,M&&window.location;function L(...t){let n,a,s,i;if(ve(t[0])?([a,s,i]=t,n=K):[n,a,s,i]=t,!n)return Y;let m=Y;const y=e.watch(()=>b(n),g=>{m(),g&&(g.addEventListener(a,s,i),m=()=>{g.removeEventListener(a,s,i),m=Y})},{immediate:!0,flush:"post"}),E=()=>{y(),m()};return Ve(E),E}function J(t,n,a={}){const{window:s=K,ignore:i,capture:m=!0,detectIframe:y=!1}=a;if(!s)return;const E=e.ref(!0);let g;const d=v=>{s.clearTimeout(g);const V=b(t),B=v.composedPath();!V||V===v.target||B.includes(V)||!E.value||i&&i.length>0&&i.some(P=>{const u=b(P);return u&&(v.target===u||B.includes(u))})||n(v)},h=[L(s,"click",d,{passive:!0,capture:m}),L(s,"pointerdown",v=>{const V=b(t);E.value=!!V&&!v.composedPath().includes(V)},{passive:!0}),L(s,"pointerup",v=>{if(v.button===0){const V=v.composedPath();v.composedPath=()=>V,g=s.setTimeout(()=>d(v),50)}},{passive:!0}),y&&L(s,"blur",v=>{var V;const B=b(t);((V=document.activeElement)==null?void 0:V.tagName)==="IFRAME"&&!(B!=null&&B.contains(document.activeElement))&&n(v)})].filter(Boolean);return()=>h.forEach(v=>v())}const U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q="__vueuse_ssr_handlers__";U[Q]=U[Q]||{},U[Q];var X;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(X||(X={}));var Ne=Object.defineProperty,Z=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,ee=(t,n,a)=>n in t?Ne(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,Ce=(t,n)=>{for(var a in n||(n={}))Be.call(n,a)&&ee(t,a,n[a]);if(Z)for(var a of Z(n))we.call(n,a)&&ee(t,a,n[a]);return t};Ce({linear:De},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const te=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],Ie=()=>{const t=new Date,n=t.getFullYear(),a=t.getMonth()+1;let s=n,i=a+1;return a===12&&(i=1,s=s+1),{leftYear:n,leftMonth:a,rightYear:s,rightMonth:i}},I=t=>t<10?"0"+t:t,A=t=>{const n=new Date(t),a=n.getFullYear(),s=I(n.getMonth()+1),i=I(n.getDate());return a+"-"+s+"-"+i},j=(t,n)=>(t<=0&&(t=12,n--),{month:t,year:n}),z=(t,n)=>(t>12&&(t=1,n++),{month:t,year:n}),Te=(t,n)=>new Date(t,n-1,1).getDay(),H=(t,n)=>new Date(t,n,0).getDate(),ne=(t,n)=>{let a=Te(t,n),s=H(t,n-1);a===0&&(a=7);let i=[];for(;i.length<a;)i.push(s--);return i.reverse()},Me=(t,n)=>{const a=ne(t,n).length,s=H(t,n),i=42-a-s,m=[];for(let y=1;y<=i;y++)m.push(y);return m},le=(t,n)=>{const a=ne(t,n);let s=[];const i=H(t,n);for(let d=1;d<=i;d++)s.push(d);const m=Me(t,n),y=a.map(d=>{const h=t+"-"+(n-1)+"-"+d;return{value:d,category:"prev",timestamp:new Date(h).getTime()}}),E=s.map(d=>{const h=t+"-"+n+"-"+d;return{value:d,category:"curr",timestamp:new Date(h).getTime()}}),g=m.map(d=>{const h=t+"-"+(n+1)+"-"+d;return{value:d,category:"next",timestamp:new Date(h).getTime()}});return[...y,...E,...g]},be=(t,n,a)=>(t.category==="prev"&&(a===1?(n--,a=12):a--),t.category==="next"&&(a===12?(n++,a=1):a++),{month:a,year:n}),Pe=[{count:24,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"hour"},{count:60,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"minu"},{count:60,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"seco"}],xe=(t,n,a,s)=>{var m,y,E;let i=[];switch(i=Oe(t),s){case"hour":const g=((m=i.find(N=>N.val===a.value))==null?void 0:m.top)-91;n.scrollTo({top:g});break;case"minu":let d=((y=i.find(N=>N.val===a.value))==null?void 0:y.top)-91;n.scrollTo({top:d});break;case"seco":let h=((E=i.find(N=>N.val===a.value))==null?void 0:E.top)-91;n.scrollTo({top:h});break}n.addEventListener("scroll",()=>{var g;a.value=(g=i.find(d=>d.top>n.scrollTop+65))==null?void 0:g.val})},Oe=t=>t.value.map(n=>({top:n.offsetTop,val:n.innerText})),Re={class:"time-picker"},Se=["id"],Le=["onClick"],Ae=e.defineComponent({name:"TimePicker"}),Fe=e.defineComponent({...Ae,props:{showCategory:{default:()=>["hour","minu","seco"]},isMountBody:{type:Boolean,default:!0},modelValue:{default:""}},emits:["update:modelValue"],setup(t,{emit:n}){const a=t,s=e.ref(!1),i=e.ref(),m=e.ref("18:20:00"),y=e.ref("18"),E=e.ref("20"),g=e.ref("00");let d=e.computed(()=>Pe.filter(u=>a.showCategory.includes(u.id))),h=e.computed(()=>{if(a.showCategory.includes("seco")){if(!a.showCategory.includes("hour"))return E.value+" : "+g.value}else return y.value+" : "+E.value;return y.value+" : "+E.value+" : "+g.value});const N=u=>u<10?"0"+u:u.toString(),v=()=>{s.value=!0;const u=[y,E,g];setTimeout(()=>{d.value.forEach((k,p)=>{const _=document.querySelector(`#${k.id}`);xe(k.liRef,_,u[p],k.id)})},200)};J(i,()=>{s.value=!1}),e.watch(h,u=>{m.value=u});const V=(u,k,p)=>{let _=u.value[Number(k)].offsetTop-65;document.querySelector(`#${p}`).scrollTo({top:_})},B=()=>{n("update:modelValue",m.value),s.value=!1},P=()=>{n("update:modelValue",m.value),s.value=!1};return e.onMounted(()=>{n("update:modelValue",m.value)}),(u,k)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{onClick:v},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":k[0]||(k[0]=p=>m.value=p),autocomplete:"off"},null,512),[[e.vModelText,m.value]])]),s.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"timePickerRef",ref:i,class:"outer"},[e.createElementVNode("div",Re,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),p=>(e.openBlock(),e.createElementBlock("ul",{key:p.count,id:p.id},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.count,_=>(e.openBlock(),e.createElementBlock("li",{key:_,ref_for:!0,ref:p.liRef,onClick:w=>V(p.liRef,N(_-1),p.id)},e.toDisplayString(N(_-1)),9,Le))),128))],8,Se))),128))]),e.createElementVNode("div",{class:"footer"},[e.createElementVNode("button",{onClick:B},"\u53D6\u6D88"),e.createElementVNode("button",{onClick:P},"\u786E\u5B9A")])],512)):e.createCommentVNode("",!0)]))}}),dt="",ae=(t,n)=>{const a=t.__vccOpts||t;for(const[s,i]of n)a[s]=i;return a},oe=ae(Fe,[["__scopeId","data-v-c2675cdb"]]),re=t=>(e.pushScopeId("data-v-cf52ee6c"),t=t(),e.popScopeId(),t),$e=re(()=>e.createElementVNode("span",null,"\u81F3",-1)),Ye={class:"calendar-header"},Ue={class:"calendar-header-left"},Qe=re(()=>e.createElementVNode("div",null,">",-1)),je={class:"calendar-header-right"},ze={class:"calendar-content"},He={class:"calendar-content-left"},We={class:"calendar-content-left-top"},qe={class:"calendar-content-left-top-icon"},Ge={class:"calendar-content-left-top-date"},Ke=["onMouseenter","onClick"],Je={class:"calendar-content-right"},Xe={class:"calendar-content-right-top"},Ze={class:"calendar-content-right-top-date"},et={class:"calendar-content-right-top-icon"},tt=["onMouseenter","onClick"],nt=e.defineComponent({name:"Calendar"}),lt=e.defineComponent({...nt,props:{unlinkPanels:{type:Boolean,default:!1}},setup(t){const n=t,a=new Date().getDate(),s=e.ref(!1),i=e.ref(),m=e.ref(),y=e.ref(),E=e.ref(),g=e.ref(),d=e.ref(),h=e.ref([1661090509502,1661090509502]),N=()=>{s.value=!0};J(i,()=>{s.value=!1});const{leftYear:v,leftMonth:V,rightYear:B,rightMonth:P}=Ie();let u=e.ref(v),k=e.ref(V),p=e.ref(B),_=e.ref(P),w=e.ref([]),T=e.ref([]),F=e.ref(!1),W=e.ref(!1),x=e.ref(),O=e.ref(),q=e.ref(!1);const ce=l=>{if(W.value=!0,F.value&&(F.value=!1),l==="month")if(_.value++,n.unlinkPanels){const{month:r,year:o}=z(_.value,p.value);_.value=r,p.value=o}else{k.value++;const{month:r,year:o}=z(_.value,p.value);_.value=r,p.value=o;const{month:D,year:f}=z(k.value,u.value);k.value=D,u.value=f}else l==="year"&&(p.value++,n.unlinkPanels||u.value++);de()},ie=l=>{if(F.value=!0,W.value&&(W.value=!1),l==="month")if(k.value--,n.unlinkPanels){const{month:r,year:o}=j(k.value,u.value);k.value=r,u.value=o}else{_.value--;const{month:r,year:o}=j(k.value,u.value);u.value=o,k.value=r;const{month:D,year:f}=j(_.value,p.value);p.value=f,_.value=D}else l==="year"&&(u.value--,n.unlinkPanels||p.value--);de()};let c=e.ref([]);const ue=(l,r)=>{var ge,ye,ke,Ee;let o=r==="left"?u.value:p.value,D=I(r==="left"?k.value:_.value),f=I(l.value);const{month:R,year:it}=be(l,o,Number(D)),S=new Date(it+"-"+R+"-"+f).getTime();h.value.length>2?(h.value=[],(ge=h.value)==null||ge.push(S)):h.value.length===0?(ye=h.value)==null||ye.push(S):S>=h.value[0]?((ke=h.value)==null||ke.push(S),G(h.value)):((Ee=h.value)==null||Ee.unshift(S),G(h.value)),at(l)},at=l=>{c.value.length===0?c.value.push({val:l.timestamp,isInit:!0}):c.value.length===2&&(q.value=!0,c.value.find(o=>o.isInit===!1)===void 0&&(c.value=[],c.value.push({isInit:!0,val:l.timestamp}),q.value=!1),c.value.length===2&&(c.value=c.value.map(o=>(o.isInit||(o.isInit=!0),o))))};function G(l){x.value=A(l[0]),O.value=A(l[1])}e.onMounted(()=>{G(h.value)});for(let l=0;l<6;l++)w.value[l]=new Array,T.value[l]=new Array;const de=()=>{for(let l=0;l<6;l++)n.unlinkPanels?F.value?w.value[l]=new Array:T.value[l]=new Array:(w.value[l]=new Array,T.value[l]=new Array)};e.watch([u,k],l=>{let r=0;le(l[0],l[1]).forEach((o,D)=>{(D+1)%7===0?(w.value[r].push(o),r++):w.value[r].push(o)})},{immediate:!0}),e.watch([p,_],l=>{let r=0;le(l[0],l[1]).forEach((o,D)=>{(D+1)%7===0?(T.value[r].push(o),r++):T.value[r].push(o)})},{immediate:!0});const ot=e.computed(()=>u.value+"\u5E74"+I(k.value)+"\u6708"),rt=e.computed(()=>p.value+"\u5E74"+I(_.value)+"\u6708"),fe=(l,r)=>l.category==="prev"||l.category==="next"?"prevAndNext":l.category==="curr"&&l.value===a&&r?"todayStyle":"",pe=l=>{if(!(c.value.length===0||q.value)){if(c.value.length===1)l.timestamp<c.value[0].val?c.value.unshift({val:l.timestamp,isInit:!1}):c.value.push({val:l.timestamp,isInit:!1});else{const r=c.value.find(D=>D.isInit),o=c.value.findIndex(D=>D.isInit);o===0&&l.timestamp<=(r==null?void 0:r.val)?(c.value.pop(),c.value.unshift({val:l.timestamp,isInit:!1})):o===0&&(c.value[1].val=l.timestamp),o===1&&l.timestamp>=(r==null?void 0:r.val)?(c.value.shift(),c.value.push({val:l.timestamp,isInit:!1})):o===1&&(c.value[0].val=l.timestamp)}if(c.value.length===2&&c.value[0].val<=l.timestamp&&l.timestamp<=c.value[1].val)return"selectedRangeBg"}},st=()=>{s.value=!1},ct=()=>{y.value=A(c.value[0].val)+" "+g.value,E.value=A(c.value[1].val)+" "+d.value,s.value=!1},me=l=>l.category==="curr"&&c.value&&c.value.length===2&&l.timestamp<c.value[1].val&&l.timestamp>c.value[0].val?"selectedRangeBg":"",$=(l,r)=>r===0&&l.category==="curr"&&c.value&&c.value.length===2&&l.timestamp===c.value[r].val?"selectedDateLeftBoundary":r===1&&l.category==="curr"&&c.value&&c.value.length===2&&l.timestamp===c.value[r].val?"selectedDateRightBoundary":"",he=l=>l.category==="curr"&&c&&c.value.length===2&&(l.timestamp===c.value[1].val||l.timestamp===c.value[0].val)?"selectedDate":"";return(l,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:N,class:"calendarInput"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=o=>y.value=o)},null,512),[[e.vModelText,y.value]]),$e,e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=o=>E.value=o)},null,512),[[e.vModelText,E.value]])]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{class:"calendar",ref_key:"calendarRef",ref:i},[e.createElementVNode("div",Ye,[e.createElementVNode("div",Ue,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r[2]||(r[2]=o=>e.isRef(x)?x.value=o:x=o)},null,512),[[e.vModelText,e.unref(x)]]),e.createVNode(oe,{modelValue:g.value,"onUpdate:modelValue":r[3]||(r[3]=o=>g.value=o)},null,8,["modelValue"])]),Qe,e.createElementVNode("div",je,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":r[4]||(r[4]=o=>e.isRef(O)?O.value=o:O=o)},null,512),[[e.vModelText,e.unref(O)]]),e.createVNode(oe,{modelValue:d.value,"onUpdate:modelValue":r[5]||(r[5]=o=>d.value=o)},null,8,["modelValue"])])]),e.createElementVNode("div",ze,[e.createElementVNode("div",He,[e.createElementVNode("div",We,[e.createElementVNode("div",qe,[e.createElementVNode("span",{onClick:r[6]||(r[6]=o=>ie("year"))},"<<"),e.createElementVNode("span",{onClick:r[7]||(r[7]=o=>ie("month"))},"<")]),e.createElementVNode("div",Ge,e.toDisplayString(e.unref(ot)),1)]),e.createElementVNode("div",null,[e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(te),o=>(e.openBlock(),e.createElementBlock("th",{key:o},e.toDisplayString(o),1))),128))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(w),(o,D)=>(e.openBlock(),e.createElementBlock("tr",{key:D},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o,f=>(e.openBlock(),e.createElementBlock("td",{key:f,class:e.normalizeClass([me(f),$(f,0),$(f,1)])},[e.createElementVNode("div",{class:e.normalizeClass(fe(f,"curr"))},[e.createElementVNode("span",{class:e.normalizeClass([m.value===f.value?"selectedDate":"",he(f)]),onMouseenter:R=>pe(f),onClick:R=>ue(f,"left")},e.toDisplayString(f.value),43,Ke)],2)],2))),128))]))),128))])])])]),e.createElementVNode("div",Je,[e.createElementVNode("div",Xe,[e.createElementVNode("div",Ze,e.toDisplayString(e.unref(rt)),1),e.createElementVNode("div",et,[e.createElementVNode("span",{onClick:r[8]||(r[8]=o=>ce("month"))}," > "),e.createElementVNode("span",{onClick:r[9]||(r[9]=o=>ce("year"))}," >> ")])]),e.createElementVNode("div",null,[e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(te),o=>(e.openBlock(),e.createElementBlock("th",{key:o},e.toDisplayString(o),1))),128))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(T),(o,D)=>(e.openBlock(),e.createElementBlock("tr",{key:D},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o,f=>(e.openBlock(),e.createElementBlock("td",{key:f,class:e.normalizeClass([me(f),$(f,0),$(f,1)])},[e.createElementVNode("div",null,[e.createElementVNode("span",{class:e.normalizeClass([fe(f),he(f)]),onMouseenter:R=>pe(f),onClick:R=>ue(f,"right")},e.toDisplayString(f.value),43,tt)])],2))),128))]))),128))])])])])]),e.createElementVNode("div",{class:"calendar-footer"},[e.createElementVNode("button",{onClick:st},"\u53D6\u6D88"),e.createElementVNode("button",{onClick:ct},"\u786E\u5B9A")])],512),[[e.vShow,s.value]])]))],64))}}),ft="",se=ae(lt,[["__scopeId","data-v-cf52ee6c"]]);return{install:(t,n)=>{t.component(se.name,se)}}});
