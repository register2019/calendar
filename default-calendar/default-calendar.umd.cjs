(function(e,B){typeof exports=="object"&&typeof module<"u"?module.exports=B(require("vue")):typeof define=="function"&&define.amd?define(["vue"],B):(e=typeof globalThis<"u"?globalThis:e||self,e["default-calendar"]=B(e.Vue))})(this,function(e){"use strict";function B(n,l){ie(window,c=>{const i=e.unref(n),g=c.composedPath();!i||g.includes(i)||l()})}function ie(...n){let l,r;[l,r]=n,e.watch(()=>l,c=>{!c||c.addEventListener("click",r,{capture:!0,passive:!0})},{immediate:!0,flush:"post"})}const q=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"],ue=()=>{const n=new Date,l=n.getFullYear(),r=n.getMonth()+1;let c=l,i=r+1;return r===12&&(i=1,c=c+1),{leftYear:l,leftMonth:r,rightYear:c,rightMonth:i}},N=n=>n<10?"0"+n:n,R=n=>{const l=new Date(n),r=l.getFullYear(),c=N(l.getMonth()+1),i=N(l.getDate());return r+"-"+c+"-"+i},S=(n,l)=>(n<=0&&(n=12,l--),{month:n,year:l}),L=(n,l)=>(n>12&&(n=1,l++),{month:n,year:l}),de=(n,l)=>new Date(n,l-1,1).getDay(),P=(n,l)=>new Date(n,l,0).getDate(),O=(n,l)=>{let r=de(n,l),c=P(n,l-1);r===0&&(r=7);let i=[];for(;i.length<r;)i.push(c--);return i.reverse()},fe=(n,l)=>{const r=O(n,l).length,c=P(n,l),i=42-r-c,g=[];for(let E=1;E<=i;E++)g.push(E);return g},H=(n,l)=>{const r=O(n,l);let c=[];const i=P(n,l);for(let m=1;m<=i;m++)c.push(m);const g=fe(n,l),E=r.map(m=>{const p=n+"-"+(l-1)+"-"+m;return{value:m,category:"prev",timestamp:new Date(p).getTime()}}),V=c.map(m=>{const p=n+"-"+l+"-"+m;return{value:m,category:"curr",timestamp:new Date(p).getTime()}}),D=g.map(m=>{const p=n+"-"+(l+1)+"-"+m;return{value:m,category:"next",timestamp:new Date(p).getTime()}});return[...E,...V,...D]},me=(n,l,r)=>(n.category==="prev"&&(r===1?(l--,r=12):r--),n.category==="next"&&(r===12?(l++,r=1):r++),{month:r,year:l}),pe=[{count:24,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"hour"},{count:60,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"minu"},{count:60,ulRef:e.ref(),liRef:e.ref(),currRef:e.ref(""),id:"seco"}],he=(n,l,r,c)=>{var g,E,V;let i=[];switch(i=ke(n),c){case"hour":const D=((g=i.find(v=>v.val===r.value))==null?void 0:g.top)-91;l.scrollTo({top:D});break;case"minu":let m=((E=i.find(v=>v.val===r.value))==null?void 0:E.top)-91;l.scrollTo({top:m});break;case"seco":let p=((V=i.find(v=>v.val===r.value))==null?void 0:V.top)-91;l.scrollTo({top:p});break}l.addEventListener("scroll",()=>{var D;r.value=(D=i.find(m=>m.top>l.scrollTop+65))==null?void 0:D.val})},ke=n=>n.value.map(l=>({top:l.offsetTop,val:l.innerText})),ge={class:"time-picker"},ye=["id"],Ee=["onClick"],De=e.defineComponent({name:"TimePicker"}),Ve=e.defineComponent({...De,props:{showCategory:{default:()=>["hour","minu","seco"]},isMountBody:{type:Boolean,default:!0},modelValue:{default:""}},emits:["update:modelValue"],setup(n,{emit:l}){const r=n,c=e.ref(!1),i=e.ref(),g=e.ref("18:20:00"),E=e.ref("18"),V=e.ref("20"),D=e.ref("00");let m=e.computed(()=>pe.filter(d=>r.showCategory.includes(d.id))),p=e.computed(()=>{if(r.showCategory.includes("seco")){if(!r.showCategory.includes("hour"))return V.value+" : "+D.value}else return E.value+" : "+V.value;return E.value+" : "+V.value+" : "+D.value});const v=d=>d<10?"0"+d:d.toString(),A=()=>{c.value=!0;const d=[E,V,D];setTimeout(()=>{m.value.forEach((h,f)=>{const k=document.querySelector(`#${h.id}`);he(h.liRef,k,d[f],h.id)})},200)};B(i,()=>{c.value=!1}),e.watch(p,d=>{g.value=d});const F=(d,h,f)=>{let k=d.value[Number(h)].offsetTop-65;document.querySelector(`#${f}`).scrollTo({top:k})},$=()=>{l("update:modelValue",g.value),c.value=!1},Y=()=>{l("update:modelValue",g.value),c.value=!1};return e.onMounted(()=>{l("update:modelValue",g.value)}),(d,h)=>(e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",{onClick:A},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=f=>g.value=f),autocomplete:"off"},null,512),[[e.vModelText,g.value]])]),c.value?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"timePickerRef",ref:i,class:"outer"},[e.createElementVNode("div",ge,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),f=>(e.openBlock(),e.createElementBlock("ul",{key:f.count,id:f.id},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.count,k=>(e.openBlock(),e.createElementBlock("li",{key:k,ref_for:!0,ref:f.liRef,onClick:_=>F(f.liRef,v(k-1),f.id)},e.toDisplayString(v(k-1)),9,Ee))),128))],8,ye))),128))]),e.createElementVNode("div",{class:"footer"},[e.createElementVNode("button",{onClick:$},"\u53D6\u6D88"),e.createElementVNode("button",{onClick:Y},"\u786E\u5B9A")])],512)):e.createCommentVNode("",!0)]))}}),He="",G=(n,l)=>{const r=n.__vccOpts||n;for(const[c,i]of l)r[c]=i;return r},J=G(Ve,[["__scopeId","data-v-50ad1535"]]),K=n=>(e.pushScopeId("data-v-918b2776"),n=n(),e.popScopeId(),n),ve=K(()=>e.createElementVNode("span",null,"\u81F3",-1)),_e={class:"calendar-header"},Be={class:"calendar-header-left"},Ne=K(()=>e.createElementVNode("div",null,">",-1)),Ce={class:"calendar-header-right"},Me={class:"calendar-content"},we={class:"calendar-content-left"},Te={class:"calendar-content-left-top"},xe={class:"calendar-content-left-top-icon"},Re={class:"calendar-content-left-top-date"},Ie=["onMouseenter","onClick"],be={class:"calendar-content-right"},Se={class:"calendar-content-right-top"},Le={class:"calendar-content-right-top-date"},Pe={class:"calendar-content-right-top-icon"},Ae=["onMouseenter","onClick"],Fe=e.defineComponent({name:"Calendar"}),$e=e.defineComponent({...Fe,props:{unlinkPanels:{type:Boolean,default:!1}},setup(n){const l=n,r=new Date().getDate(),c=e.ref(!1),i=e.ref(),g=e.ref(),E=e.ref(),V=e.ref(),D=e.ref(),m=e.ref(),p=e.ref([1661090509502,1661090509502]),v=()=>{c.value=!0};B(i,()=>{c.value=!1});const{leftYear:A,leftMonth:F,rightYear:$,rightMonth:Y}=ue();let d=e.ref(A),h=e.ref(F),f=e.ref($),k=e.ref(Y),_=e.ref([]),C=e.ref([]),I=e.ref(!1),U=e.ref(!1),M=e.ref(),w=e.ref(),j=e.ref(!1);const W=t=>{if(U.value=!0,I.value&&(I.value=!1),t==="month")if(k.value++,l.unlinkPanels){const{month:o,year:a}=L(k.value,f.value);k.value=o,f.value=a}else{h.value++;const{month:o,year:a}=L(k.value,f.value);k.value=o,f.value=a;const{month:y,year:u}=L(h.value,d.value);h.value=y,d.value=u}else t==="year"&&(f.value++,l.unlinkPanels||d.value++);ee()},X=t=>{if(I.value=!0,U.value&&(U.value=!1),t==="month")if(h.value--,l.unlinkPanels){const{month:o,year:a}=S(h.value,d.value);h.value=o,d.value=a}else{k.value--;const{month:o,year:a}=S(h.value,d.value);d.value=a,h.value=o;const{month:y,year:u}=S(k.value,f.value);f.value=u,k.value=y}else t==="year"&&(d.value--,l.unlinkPanels||f.value--);ee()};let s=e.ref([]);const Z=(t,o)=>{var oe,re,se,ce;let a=o==="left"?d.value:f.value,y=N(o==="left"?h.value:k.value),u=N(t.value);const{month:T,year:Oe}=me(t,a,Number(y)),x=new Date(Oe+"-"+T+"-"+u).getTime();p.value.length>2?(p.value=[],(oe=p.value)==null||oe.push(x)):p.value.length===0?(re=p.value)==null||re.push(x):x>=p.value[0]?((se=p.value)==null||se.push(x),z(p.value)):((ce=p.value)==null||ce.unshift(x),z(p.value)),Ye(t)},Ye=t=>{s.value.length===0?s.value.push({val:t.timestamp,isInit:!0}):s.value.length===2&&(j.value=!0,s.value.find(a=>a.isInit===!1)===void 0&&(s.value=[],s.value.push({isInit:!0,val:t.timestamp}),j.value=!1),s.value.length===2&&(s.value=s.value.map(a=>(a.isInit||(a.isInit=!0),a))))};function z(t){M.value=R(t[0]),w.value=R(t[1])}e.onMounted(()=>{z(p.value)});for(let t=0;t<6;t++)_.value[t]=new Array,C.value[t]=new Array;const ee=()=>{for(let t=0;t<6;t++)l.unlinkPanels?I.value?_.value[t]=new Array:C.value[t]=new Array:(_.value[t]=new Array,C.value[t]=new Array)};e.watch([d,h],t=>{let o=0;H(t[0],t[1]).forEach((a,y)=>{(y+1)%7===0?(_.value[o].push(a),o++):_.value[o].push(a)})},{immediate:!0}),e.watch([f,k],t=>{let o=0;H(t[0],t[1]).forEach((a,y)=>{(y+1)%7===0?(C.value[o].push(a),o++):C.value[o].push(a)})},{immediate:!0});const Ue=e.computed(()=>d.value+"\u5E74"+N(h.value)+"\u6708"),je=e.computed(()=>f.value+"\u5E74"+N(k.value)+"\u6708"),te=(t,o)=>t.category==="prev"||t.category==="next"?"prevAndNext":t.category==="curr"&&t.value===r&&o?"todayStyle":"",le=t=>{if(!(s.value.length===0||j.value)){if(s.value.length===1)t.timestamp<s.value[0].val?s.value.unshift({val:t.timestamp,isInit:!1}):s.value.push({val:t.timestamp,isInit:!1});else{const o=s.value.find(y=>y.isInit),a=s.value.findIndex(y=>y.isInit);a===0&&t.timestamp<=(o==null?void 0:o.val)?(s.value.pop(),s.value.unshift({val:t.timestamp,isInit:!1})):a===0&&(s.value[1].val=t.timestamp),a===1&&t.timestamp>=(o==null?void 0:o.val)?(s.value.shift(),s.value.push({val:t.timestamp,isInit:!1})):a===1&&(s.value[0].val=t.timestamp)}if(s.value.length===2&&s.value[0].val<=t.timestamp&&t.timestamp<=s.value[1].val)return"selectedRangeBg"}},ze=()=>{c.value=!1},qe=()=>{E.value=R(s.value[0].val)+" "+D.value,V.value=R(s.value[1].val)+" "+m.value,c.value=!1},ne=t=>t.category==="curr"&&s.value&&s.value.length===2&&t.timestamp<s.value[1].val&&t.timestamp>s.value[0].val?"selectedRangeBg":"",b=(t,o)=>o===0&&t.category==="curr"&&s.value&&s.value.length===2&&t.timestamp===s.value[o].val?"selectedDateLeftBoundary":o===1&&t.category==="curr"&&s.value&&s.value.length===2&&t.timestamp===s.value[o].val?"selectedDateRightBoundary":"",ae=t=>t.category==="curr"&&s&&s.value.length===2&&(t.timestamp===s.value[1].val||t.timestamp===s.value[0].val)?"selectedDate":"";return(t,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{onClick:v,class:"calendarInput"},[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=a=>E.value=a)},null,512),[[e.vModelText,E.value]]),ve,e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=a=>V.value=a)},null,512),[[e.vModelText,V.value]])]),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.withDirectives(e.createElementVNode("div",{class:"calendar",ref_key:"calendarRef",ref:i},[e.createElementVNode("div",_e,[e.createElementVNode("div",Be,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=a=>e.isRef(M)?M.value=a:M=a)},null,512),[[e.vModelText,e.unref(M)]]),e.createVNode(J,{modelValue:D.value,"onUpdate:modelValue":o[3]||(o[3]=a=>D.value=a)},null,8,["modelValue"])]),Ne,e.createElementVNode("div",Ce,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=a=>e.isRef(w)?w.value=a:w=a)},null,512),[[e.vModelText,e.unref(w)]]),e.createVNode(J,{modelValue:m.value,"onUpdate:modelValue":o[5]||(o[5]=a=>m.value=a)},null,8,["modelValue"])])]),e.createElementVNode("div",Me,[e.createElementVNode("div",we,[e.createElementVNode("div",Te,[e.createElementVNode("div",xe,[e.createElementVNode("span",{onClick:o[6]||(o[6]=a=>X("year"))},"<<"),e.createElementVNode("span",{onClick:o[7]||(o[7]=a=>X("month"))},"<")]),e.createElementVNode("div",Re,e.toDisplayString(e.unref(Ue)),1)]),e.createElementVNode("div",null,[e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(q),a=>(e.openBlock(),e.createElementBlock("th",{key:a},e.toDisplayString(a),1))),128))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(_),(a,y)=>(e.openBlock(),e.createElementBlock("tr",{key:y},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,u=>(e.openBlock(),e.createElementBlock("td",{key:u,class:e.normalizeClass([ne(u),b(u,0),b(u,1)])},[e.createElementVNode("div",{class:e.normalizeClass(te(u,"curr"))},[e.createElementVNode("span",{class:e.normalizeClass([g.value===u.value?"selectedDate":"",ae(u)]),onMouseenter:T=>le(u),onClick:T=>Z(u,"left")},e.toDisplayString(u.value),43,Ie)],2)],2))),128))]))),128))])])])]),e.createElementVNode("div",be,[e.createElementVNode("div",Se,[e.createElementVNode("div",Le,e.toDisplayString(e.unref(je)),1),e.createElementVNode("div",Pe,[e.createElementVNode("span",{onClick:o[8]||(o[8]=a=>W("month"))}," > "),e.createElementVNode("span",{onClick:o[9]||(o[9]=a=>W("year"))}," >> ")])]),e.createElementVNode("div",null,[e.createElementVNode("table",null,[e.createElementVNode("thead",null,[e.createElementVNode("tr",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(q),a=>(e.openBlock(),e.createElementBlock("th",{key:a},e.toDisplayString(a),1))),128))])]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(C),(a,y)=>(e.openBlock(),e.createElementBlock("tr",{key:y},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a,u=>(e.openBlock(),e.createElementBlock("td",{key:u,class:e.normalizeClass([ne(u),b(u,0),b(u,1)])},[e.createElementVNode("div",null,[e.createElementVNode("span",{class:e.normalizeClass([te(u),ae(u)]),onMouseenter:T=>le(u),onClick:T=>Z(u,"right")},e.toDisplayString(u.value),43,Ae)])],2))),128))]))),128))])])])])]),e.createElementVNode("div",{class:"calendar-footer"},[e.createElementVNode("button",{onClick:ze},"\u53D6\u6D88"),e.createElementVNode("button",{onClick:qe},"\u786E\u5B9A")])],512),[[e.vShow,c.value]])]))],64))}}),Ge="",Q=G($e,[["__scopeId","data-v-918b2776"]]);return{install:(n,l)=>{n.component(Q.name,Q)}}});
